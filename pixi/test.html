<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>Hello World</title>
</head>
<script src="../js/pixi.min.js"></script>

<body>
  <script type="text/javascript">

    let sprite;
    //Aliases
    let Application = PIXI.Application,
      Container = PIXI.Container,
      loader = PIXI.Loader.shared,
      resources = PIXI.loader.resources,
      TextureCache = PIXI.utils.TextureCache,
      Sprite = PIXI.Sprite,
      Rectangle = PIXI.Rectangle;
    //Create a Pixi Application
    let app = new PIXI.Application({
      width: 640,
      height: 960,
      antialias: true,
      transparent: true,
      resolution: 1
    });

    //Add the canvas that Pixi automatically created for you to the HTML document
    document.body.appendChild(app.view);

    loader
      .add(["atlas.json",
        "../stationid.png"])
      .load(setup);

    function setup() {

      let spriteTexture = TextureCache["../stationid.png"];
      sprite = new Sprite(spriteTexture);
      sprite.position.set(100, 100);
      sprite.scale.set(0.5, 0.5);
      sprite.anchor.set(.5, .5);
      sprite.rotation = 0.5;

      let anchor = new PIXI.Point(0, 0)

      let frames = new Array()
      let sheetContainer = new PIXI.Container();
      sheetContainer.sortableChildren = true
      // for (let i = 0; i < 15; i++) {
      //   console.log("for")
      //   let rectangle = new PIXI.Rectangle(640 * i, 0, 640, 960);
      //   sheet.frame = rectangle;
      //   let rocket = new PIXI.Sprite(sheet);
      //   rocket.position.set(0, 0);
      //   // rocket.blendMode = PIXI.BLEND_MODES.ADD
      //   sheets.push(rocket)
      //   sheetContainer.addChild(sheets[i]);
      // }
      // app.stage.addChild(sheetContainer);


      // let rectangle2 = new PIXI.Rectangle(640 * 5, 0, 640, 960);
      // sheet.frame = rectangle2;
      // let rocket2 = new PIXI.Sprite(sheet);
      // // rocket2.scale.set(0.5, 0.5);
      // rocket2.zIndex = 1
      // rocket2.alpha = .5

      // sheetContainer.addChild(rocket2);


      for (let i = 1; i < 16; i++) {
        let sheet = TextureCache[`sheet${i}.png`];
        let rocket = new PIXI.Sprite(sheet);
        // rocket.blendMode = PIXI.BLEND_MODES.ADD
        rocket.zIndex = i
        rocket.alpha = .1
        sheetContainer.addChild(rocket);
      }

      app.stage.addChild(sprite);
      app.stage.addChild(sheetContainer)


      app.ticker.add(delta => gameLoop(delta));
    }

    function gameLoop(delta) {

      //Move the cat 1 pixel 
      sprite.x += 1;
      sprite.rotation += .01;
      if (sprite.x > 640) sprite.x = 0
    }

  </script>
</body>

</html>